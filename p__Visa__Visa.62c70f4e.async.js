(self.webpackChunkparami_app=self.webpackChunkparami_app||[]).push([[9811],{55133:function(M){M.exports={modal:"modal___1O81X",codeInput:"codeInput___1b6is",verifyForm:"verifyForm___3o9Cw",highLight:"highLight___wTtyW",verifyInput:"verifyInput___29jF0",buttons:"buttons___2s-8l",button:"button___13mjZ",title:"title___35CCk",confirmContainer:"confirmContainer___3-95Y",alertContainer:"alertContainer___HBKri",field:"field___mBf3w",labal:"labal___1ZC5A",small:"small___1qvTc",labalIcon:"labalIcon___Wx-BW",value:"value___16uzM"}},31639:function(M){M.exports={ad3:"ad3___22MgQ",unit:"unit___UR_Yf"}},66620:function(M){M.exports={visaCard:"visaCard___bphzJ",subTitle:"subTitle___1LQU-",buttons:"buttons___2add8",or:"or___2GkXi",button:"button___1CjWQ"}},46656:function(M,O,e){"use strict";var ee=e(71194),T=e(50146),L=e(47673),n=e(32787),U=e(22385),I=e(31097),z=e(17462),p=e(76772),E=e(57663),r=e(71577),l=e(3182),d=e(2824),b=e(402),A=e(3887),W=e(94043),D=e.n(W),K=e(67294),R=e(43581),G=e(55133),t=e.n(G),se=e(3548),H=e(68855),a=e(85893),y=A.Z.Title,S=function(_){var B=_.visable,V=_.setVisable,s=_.passphrase,N=_.setPassphrase,o=_.func,J=_.changePassphrase,j=(0,R.tT)("apiWs"),ae=(0,R.tT)("currentUser"),i=ae.wallet,te=(0,R.tT)("balance"),Y=te.balance,Q=(0,K.useState)(!1),$=(0,d.Z)(Q,2),u=$[0],Z=$[1],w=(0,K.useState)(),C=(0,d.Z)(w,2),P=C[0],ne=C[1],c=(0,R.YB)(),X=function(h){N(h?h.target.value:"")},_e=function(){if(Z(!0),!s||s.length<6){Z(!1);return}o&&o(),V(!1),Z(!1)},x=function(){var v=(0,l.Z)(D().mark(function h(){var f;return D().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(!(!!j&&!!i.account)){g.next=5;break}return g.next=3,o(!0,i.account);case 3:f=g.sent,f&&ne(f.partialFee);case 5:case"end":return g.stop()}},h)}));return function(){return v.apply(this,arguments)}}();return(0,K.useEffect)(function(){!!j&&!!(i!=null&&i.account)&&B&&x()},[j,i==null?void 0:i.account,B]),(0,K.useEffect)(function(){!!(i!=null&&i.passphrase)&&B&&!J&&N(i==null?void 0:i.passphrase)},[i==null?void 0:i.passphrase,s,B,J]),(0,a.jsxs)(T.Z,{title:(0,a.jsx)(y,{level:3,children:c.formatMessage({id:"modal.security.title"})}),closable:!1,className:t().modal,centered:!0,visible:B,width:400,footer:(0,a.jsxs)("div",{className:t().buttons,children:[(0,a.jsx)(r.Z,{type:"text",shape:"round",size:"large",className:t().button,onClick:function(){V(!1)},loading:u,children:c.formatMessage({id:"common.decline"})}),(0,a.jsx)(r.Z,{type:"primary",shape:"round",size:"large",className:t().button,onClick:function(){_e()},disabled:!s||s.length<6,loading:u,children:c.formatMessage({id:"common.confirm"})})]}),children:[(0,a.jsxs)("div",{className:t().confirmContainer,children:[!!P&&!!(P!=null&&P.toString())>Y.free&&(0,a.jsx)(p.Z,{description:c.formatMessage({id:"error.balance.low"}),type:"warning",showIcon:!0,banner:!0,className:t().alertContainer}),(0,a.jsxs)("div",{className:t().field,children:[(0,a.jsxs)("div",{className:t().labal,children:[c.formatMessage({id:"modal.security.gas"}),(0,a.jsxs)("span",{className:t().small,children:["(",c.formatMessage({id:"modal.security.estimated"}),")"]}),(0,a.jsx)(I.Z,{placement:"bottom",title:c.formatMessage({id:"modal.security.gas.tooltip",defaultMessage:"Gas fees are paid to crypto miners who process transactions on the network. Parami does not profit from gas fees."}),children:(0,a.jsx)(H.Z,{className:t().labalIcon})})]}),(0,a.jsx)("div",{className:t().value,children:(0,a.jsx)(se.Z,{value:P,style:{fontSize:"0.8rem",fontWeight:900}})})]})]}),!s&&(0,a.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",width:"100%"},children:(0,a.jsxs)("div",{className:t().codeInput,children:[(0,a.jsxs)("div",{className:t().verifyForm,children:[(0,a.jsx)("span",{className:(s==null?void 0:s.slice(0))&&!(s!=null&&s.slice(1,5))&&t().highLight,children:s==null?void 0:s.slice(0,1).replace(/[^]/,"\u2731")}),(0,a.jsx)("span",{className:(s==null?void 0:s.slice(1))&&!(s!=null&&s.slice(2,5))&&t().highLight,children:s==null?void 0:s.slice(1,2).replace(/[^]/,"\u2731")}),(0,a.jsx)("span",{className:(s==null?void 0:s.slice(2,3))&&!(s!=null&&s.slice(3,5))&&t().highLight,children:s==null?void 0:s.slice(2,3).replace(/[^]/,"\u2731")}),(0,a.jsx)("span",{className:(s==null?void 0:s.slice(3,4))&&!(s!=null&&s.slice(4,5))&&t().highLight,children:s==null?void 0:s.slice(3,4).replace(/[^]/,"\u2731")}),(0,a.jsx)("span",{className:(s==null?void 0:s.slice(4,5))&&!(s!=null&&s.slice(5))&&t().highLight,children:s==null?void 0:s.slice(4,5).replace(/[^]/,"\u2731")}),(0,a.jsx)("span",{className:(s==null?void 0:s.slice(5))&&t().highLight,children:s==null?void 0:s.slice(5).replace(/[^]/,"\u2731")})]}),(0,a.jsx)(n.Z.Password,{autoFocus:!0,autoComplete:"new-password",size:"large",className:t().verifyInput,onChange:X,value:s,disabled:u,maxLength:6,visibilityToggle:!1})]})})]})};O.Z=S},3548:function(M,O,e){"use strict";var ee=e(67294),T=e(31639),L=e.n(T),n=e(96534),U=e(85893),I=function(p){var E=p.value,r=p.style;return(0,U.jsxs)("div",{className:L().ad3,style:r,children:[E?(0,n.MP)(E):"--",(0,U.jsx)("span",{className:L().unit,children:"\xA0$AD3"})]})};O.Z=I},62066:function(M,O,e){"use strict";e.r(O);var ee=e(58024),T=e(39144),L=e(57663),n=e(71577),U=e(17462),I=e(76772),z=e(74379),p=e(38648),E=e(34792),r=e(48086),l=e(3182),d=e(2824),b=e(402),A=e(3887),W=e(94043),D=e.n(W),K=e(46656),R=e(63667),G=e(67294),t=e(43581),se=e(55909),H=e.n(se),a=e(66620),y=e.n(a),S=e(59749),le=e(47832),_=e(85893),B=A.Z.Title,V=function(){var N=(0,t.tT)("currentUser"),o=N.wallet,J=(0,G.useState)(!1),j=(0,d.Z)(J,2),ae=j[0],i=j[1],te=(0,G.useState)(""),Y=(0,d.Z)(te,2),Q=Y[0],$=Y[1],u=(0,t.YB)(),Z=t.m8.location.query,w=Z,C=w.audience,P=w.scope,ne=P!=null?P:"",c=ne.indexOf("sign")>-1,X=function(){var x=(0,l.Z)(D().mark(function v(h,f){var k,g,ie,q,re,F,oe,de,ue;return D().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(!(h&&f)){m.next=2;break}return m.abrupt("return");case 2:if(!(!!o&&!!(o!=null&&o.keystore))){m.next=23;break}if(k=Date.now()/1e3|0,g=JSON.stringify({alg:c?"SrDSA":"none",typ:"JWT"}),ie=JSON.stringify({iss:window.location.origin,sub:o==null?void 0:o.account,aud:C,iat:k,exp:k+30}),q="".concat((0,S.tH)(g),".").concat((0,S.tH)(ie)),c){m.next=11;break}return window.opener.postMessage("".concat(q,"."),C),window.close(),m.abrupt("return");case 11:if(re=new R.Y({type:"sr25519"}),F=(0,le.Gh)(Q,o==null?void 0:o.keystore),!(F==null||!F)){m.next=16;break}return r.default.error(u.formatMessage({id:"error.passphrase.error"})),m.abrupt("return");case 16:oe=re.createFromUri(F),de=oe.sign(q),ue="".concat(q,".").concat((0,S.tH)(de)),window.opener.postMessage(ue,C),window.close(),m.next=24;break;case 23:p.default.error({key:"accessDenied",message:u.formatMessage({id:"error.accessDenied"}),duration:null});case 24:case"end":return m.stop()}},v)}));return function(h,f){return x.apply(this,arguments)}}(),_e=function(){var x=(0,l.Z)(D().mark(function v(){return D().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:window.opener.postMessage("eyJhbGciOiJub25lIiwidHlwIjoiSldUIn0.e30.",C),window.close();case 2:case"end":return f.stop()}},v)}));return function(){return x.apply(this,arguments)}}();return(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)("div",{className:H().mainBgContainer,style:{height:"100vh"},children:(0,_.jsxs)("div",{className:H().pageContainer,children:[(0,_.jsxs)(T.Z,{className:y().visaCard,children:[(0,_.jsx)(B,{level:2,style:{fontWeight:"bold",textAlign:"center"},children:u.formatMessage({id:"visa.title"})}),(0,_.jsx)("span",{className:y().subTitle,children:u.formatMessage({id:"visa.subtitle"})}),(0,_.jsx)(I.Z,{style:{textAlign:"center",marginTop:50},message:"Audience",description:C,type:"info"}),(0,_.jsxs)("div",{className:y().buttons,children:[(0,_.jsx)(n.Z,{type:"primary",shape:"round",size:"large",className:y().button,style:{backgroundImage:"linear-gradient(-225deg, #FE2105 0%, #FF5B00 38%, #96E9EA 100%)"},onClick:function(){c?i(!0):X()},children:u.formatMessage({id:"visa.stamp"})}),(0,_.jsx)("span",{className:y().or,children:u.formatMessage({id:"index.or"})}),(0,_.jsx)(n.Z,{shape:"round",size:"large",className:y().button,onClick:_e,children:u.formatMessage({id:"visa.decline"})})]})]}),(0,_.jsx)("img",{src:"/images/logo-text-black.svg",style:{display:"block",width:150,opacity:.3,marginBottom:20,marginTop:50}})]})}),(0,_.jsx)(K.Z,{visable:ae,setVisable:i,passphrase:Q,setPassphrase:$,func:X})]})};O.default=V},47832:function(M,O,e){"use strict";e.d(O,{QM:function(){return I},Gh:function(){return z}});var ee=e(74379),T=e(38648),L=e(81354),n=e.n(L),U=function(E){var r=E;if(r===""||r===void 0||!r){T.default.error({message:"Wrong Password",duration:null});return}var l=r.length%4;l=4-l;for(var d=0;d<l;d+=1)r=r.concat("p");return r},I=function(E,r){var l=U(E);if(!(l==null||!l)){var d=n().enc.Utf8.parse(l),b=n().enc.Utf8.parse(l),A=n().enc.Utf8.parse(r),W=n().AES.encrypt(A,d,{keySize:128/8,iv:b,mode:n().mode.CBC,padding:n().pad.Pkcs7});return W.ciphertext.toString()}},z=function(E,r){var l=U(E);if(!(l==null||!l)){var d=n().enc.Utf8.parse(l),b=n().enc.Utf8.parse(l),A=n().enc.Hex.parse(r),W=n().enc.Base64.stringify(A),D=n().AES.decrypt(W,d,{keySize:128/8,iv:b,mode:n().mode.CBC,padding:n().pad.Pkcs7});return D.toString(n().enc.Utf8)}}},80950:function(){},96419:function(){},56353:function(){},8623:function(){},42480:function(){},7748:function(){},56619:function(){},77108:function(){},55024:function(){}}]);
